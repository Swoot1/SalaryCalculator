<div class="row">
    <div class="large-6 columns">
        <form ng-model="salaryCalculation" ng-model-options="{debounce : 500}">
            <label>
                Vilket år är du född?
                <select ng-model="salaryCalculation.person.birthYear" ng-change="calculate()">
                    <option ng-repeat="personBirthYear in personBirthYearCollection" value="{{personBirthYear}}">{{personBirthYear}}</option>
                </select>
            </label>

            <label>
                Vilken kommun bor du i?
                <select ng-model="municipalityTaxInformation.municipalityIndex" ng-change="setTownships(municipalityTaxInformation.municipalityIndex)">
                    <option ng-repeat="municipality in municipalities" value="{{$index}}">{{municipality.municipality}}</option>
                </select>
            </label>
            <label>
                Vilken församling tillhör du?
                <select ng-model="municipalityTaxInformation.townshipIndex">
                    <option ng-repeat="township in townships" value="{{$index}}">{{township.township}}</option>
                </select>
            </label>
            <label>Är du medlem i Svenska Kyrkan?
                <br/>
                <input type="radio" ng-model="municipalityTaxInformation.isMemberOfSwedishChurch" name="isMemberOfSwedishChurch" ng-value="{{true}}"> Ja
                <input type="radio" ng-model="municipalityTaxInformation.isMemberOfSwedishChurch" name="isMemberOfSwedishChurch" ng-value="{{false}}"> Nej
            </label>
            <label>
                Hur många procent av din arbetade tid kan du fakturera till kund?
                <input type="range" ng-model="test.billableTimePercentage" ng-change="calculate()" min="10" max="100" step="5"/>
                <p>{{test.billableTimePercentage}} %</p>
            </label>
            <label>
                Antal procent av inkomsten som ska återinvesteras i företaget
                <input type="range" ng-model="test.profitPercentageOfIncome" min="0" max="100" step="5" />
                <p>{{test.profitPercentageOfIncome}}%</p>
            </label>
            <label>
                Antal semesterdagar
                <input type="range" ng-model="test.numberOfVacationDaysInAYear" min="0" max="50" step="1" />
                <p> {{test.numberOfVacationDaysInAYear}} </p>
            </label>
            <label>
                Årets inkomst efter att moms och kostnader har dragits av
                <input type="range" style="width:100%;" ng-model="salaryCalculation.earnedIncome" min="200000" max="1500000" step="10000" ng-change="calculate()"/>
            </label>
            <p> {{salaryCalculation.earnedIncome}} </p>
        </form>
    </div>
</div>

<div class="row">
    <div class="large-6 columns">
        <p ng-if="!showCostsForm"><span class="link" ng-click="setShowCostsForm(true)">Lägg till företagets kostnader</span> för
            att få ett mer rättvist resultat.</p>

        <p><span class="link" ng-if="showCostsForm" ng-click="setShowCostsForm(false)">Dölj kostnader</span></p>

        <div ng-if="showCostsForm">
            <form>
                <label>
                    Namn på kostnad t.ex. 'hyra av lokal' eller 'revisorkostnad'
                    <input type="text" ng-model="cost.typeOfCost"/>
                </label>
                <label>Månadsavgift för kostnaden
                    <input type="number" ng-model="cost.monthlyCost"/>
                </label>
                <input type="button" class="button tiny radius" ng-click="addCostToCostCollection(cost)"
                       value="Lägg till kostnad"/>
            </form>

            <div ng-if="costCollection.length">
                <p>Kostnader</p>

                <p ng-repeat="cost in costCollection">{{cost.typeOfCost}} {{cost.monthlyCost}} kr/månad <input
                        class="button tiny alert radius" type="button" value="x"
                        ng-click="deleteCostFromCostCollection($index)"/></p>

            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="large-7 columns">
        <p>Månadslön efter skatt: {{calculateMonthlyWageAfterTaxes() | formattomoney}} kr</p>

        <p>Timarvode exkl. moms: {{calculateHourlyBillAmount() | formattomoney}} kr</p>

        <p>Företagets vinst per månad (skattad): {{calculateProfitPerMonth() | formattomoney}} kr</p>

    </div>
</div>

<div class="row">
    <div class="large-7 columns">
        <p><span class="link" ng-if="!calculationsAreVisible" ng-click="setCalculationsAreVisible(true)">Visa skatteuträkning</span>
        </p>

        <p><span class="link" ng-if="calculationsAreVisible" ng-click="setCalculationsAreVisible(false)">Dölj skatteuträkning</span>
        </p>

        <div ng-if="calculationsAreVisible">
            <p style="font-weight: 900">Årets skatteuträkning:</p>

            <p>Fastställd förvärvsinkomst: {{salaryCalculation.establishedBusinessExcess}}</p>

            <p>Grundavdrag: {{salaryCalculation.baseDeductionRoundedUpToNearestHundred}}</p>

            <p>Beskattningsbar förvärvsinkomst: {{salaryCalculation.taxableIncome}}</p>

            <p>Egenavgifter och allmän löneavgift: {{salaryCalculation.ownFees}}</p>

            <p>Kommunal inkomstskatt: {{salaryCalculation.municipalityTaxRoundedDownToFullCrowns}}</p>

            <p>Statlig inkomstskatt: {{salaryCalculation.stateIncomeTax}}</p>

            <p>Förhöjd statlig inkomstskatt: {{salaryCalculation.increasedStateIncomeTax}}</p>

            <p>Allmän pensionsavgift: {{salaryCalculation.generalRetirementFeeRoundedToClosestHundred}}</p>

            <p>Skattereduktion för allmän pensionsavgift: {{salaryCalculation.generalRetirementFeeDeduction}}</p>

            <p>Skattereduktion för arbetsinkomster (jobbskatteavdrag): {{salaryCalculation.largestPossibleWorkTaxDeduction}}</p>

            <p>Skatt att betala (preliminärskatt): {{salaryCalculation.sumOfTaxes}}</p>
        </div>
    </div>
</div>
